# 生徒さん向けセットアップガイド

MyLoopプロジェクトのローカル環境構築手順です。

## 📋 目次
1. [必須: 環境変数ファイルの設定](#1-環境変数ファイルの設定)
2. [環境確認ツールの実行](#2-環境確認ツールの実行)
3. [開発サーバーの起動](#3-開発サーバーの起動)
4. [よくある問題と解決方法](#よくある問題と解決方法)

---

## 1. 環境変数ファイルの設定

### ステップ1: ファイルの配置場所を確認

`.env.local`ファイルは、**プロジェクトのルートディレクトリ**（一番上の階層）に配置する必要があります。

```
MyLoop/                    ← このフォルダを開いている状態で
├── .env.local            ← ここに配置！（package.jsonと同じ階層）
├── package.json
├── next.config.js
├── src/
├── node_modules/
└── ...
```

### ステップ2: ファイル名を確認

**重要**: ファイル名は `.env.local` です（ドットで始まります）

#### Windowsの方への注意

Windowsでは、ファイルをダウンロードすると自動的に拡張子が追加されることがあります：
- ❌ 間違い: `.env.local.txt`
- ❌ 間違い: `env.local`
- ✅ 正しい: `.env.local`

**ファイル名を確認する方法:**

1. エクスプローラーを開く
2. 「表示」タブをクリック
3. 「ファイル名拡張子」にチェックを入れる
4. ファイル名が `.env.local` になっているか確認
5. もし `.env.local.txt` になっていたら、名前を変更して `.txt` を削除

#### Macの方への注意

Macでは、ドットで始まるファイルは「隠しファイル」として扱われます：
- Finderで `Cmd + Shift + .` を押すと隠しファイルが表示されます
- ターミナルで `ls -la` コマンドを実行すると確認できます

### ステップ3: ファイルの配置方法

1. Googleドライブからダウンロードした `.env.local` ファイルを準備
2. VSCodeでプロジェクトフォルダを開いている場合:
   - エクスプローラーからファイルをVSCodeのサイドバー（ファイル一覧）にドラッグ&ドロップ
   - 一番上の階層（`package.json`と同じ階層）に配置されていることを確認

3. ファイルマネージャー（エクスプローラー/Finder）で操作する場合:
   - プロジェクトフォルダ（MyLoop）を開く
   - `.env.local` ファイルをこのフォルダにコピー

---

## 2. 環境確認ツールの実行

環境変数が正しく設定されているか確認するツールを用意しました。

### 実行方法

ターミナル（VSCodeの下部）で以下のコマンドを実行:

```bash
node check-env.js
```

### 診断結果の見方

#### ✅ 成功の場合
```
✅ すべての環境変数が正しく設定されています！
```
→ 次のステップに進んでください

#### ❌ 失敗の場合
```
❌ 問題: .env.localファイルが見つかりません
```
→ ステップ1に戻って、ファイルの配置場所とファイル名を確認してください

---

## 3. 開発サーバーの起動

### ステップ1: 依存関係のインストール（初回のみ）

```bash
npm install
```

### ステップ2: 開発サーバーの起動

```bash
npm run dev
```

### ステップ3: ブラウザで確認

1. ブラウザで `http://localhost:3000` を開く
2. F12キーを押して開発者ツールを開く
3. 「Console」タブを確認
4. エラーメッセージがないか確認

#### 正常に動作している場合
- ログイン画面が表示される
- コンソールにエラーがない（または警告のみ）

#### まだ問題がある場合
- コンソールに「Firebase」や「API Key」に関するエラーが表示される
- → 「よくある問題と解決方法」を参照

---

## よくある問題と解決方法

### 問題1: 「.env.localファイルが見つかりません」

**原因**: ファイルが正しい場所に配置されていない

**解決方法**:
1. ターミナルで以下を実行して、現在のディレクトリを確認:
   ```bash
   pwd
   ```
   `/path/to/MyLoop` のようなパスが表示されるはず

2. ファイルの存在を確認:
   ```bash
   ls -la | grep env
   ```
   `.env.local` が表示されれば正しく配置されています

3. 表示されない場合は、ステップ1に戻ってファイルを配置し直してください

### 問題2: 「環境変数が設定されていません」

**原因**: ファイル名が間違っている、または内容が空

**解決方法**:
1. ファイル名を確認: `.env.local` （ドットで始まる）
2. もし `.env.local.txt` になっていたら、`.txt` を削除
3. ファイルを開いて、内容が入っているか確認
4. 空の場合は、Googleドライブから再度ダウンロード

### 問題3: 開発サーバーを起動してもエラーが出る

**原因**: サーバー起動後に`.env.local`を配置した

**解決方法**:
1. ターミナルで `Ctrl + C` を押してサーバーを停止
2. `.env.local` ファイルが正しく配置されているか確認
3. 再度 `npm run dev` でサーバーを起動

> **重要**: Next.jsは起動時に環境変数を読み込みます。
> `.env.local`を変更・追加した場合は、必ずサーバーを再起動してください。

### 問題4: ファイルが見えない（Mac）

**原因**: ドットで始まるファイルは隠しファイル扱い

**解決方法**:
- Finderで `Cmd + Shift + .` を押す
- または、ターミナルで操作する

### 問題5: 「permission denied」エラー

**原因**: ファイルの実行権限がない

**解決方法**:
```bash
chmod +x check-env.js
node check-env.js
```

---

## 📞 サポートが必要な場合

上記の手順を試してもうまくいかない場合は、以下の情報を講師に共有してください：

1. `node check-env.js` の実行結果（スクリーンショット）
2. ブラウザのコンソール（F12）のエラーメッセージ
3. 使用しているOS（Windows/Mac/Linux）
4. VSCodeのエクスプローラーで表示されているファイル一覧のスクリーンショット

---

## ✅ セットアップ完了チェックリスト

- [ ] `.env.local`ファイルをプロジェクトのルートディレクトリに配置した
- [ ] ファイル名が正しい（`.env.local`、拡張子なし）
- [ ] `node check-env.js` で「すべての環境変数が正しく設定されています」と表示された
- [ ] `npm install` を実行した
- [ ] `npm run dev` でサーバーが起動した
- [ ] `http://localhost:3000` でアプリが表示された
- [ ] ブラウザのコンソールにエラーがない

すべてにチェックが入れば、セットアップ完了です！🎉
